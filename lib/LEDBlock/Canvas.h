#ifndef CANVAS_H
#define CANVAS_H

#include <Arduino.h>
#include "Elements.h"
#include "APIData.h"

#define SUBCANVAS_OFFSET 24
#define SUBCANVAS_OFFSET_LIMIT 48

class Canvas {

  std::vector<Elements::Text *> elements;

  std::vector<Elements::Generic *> APIElements;
  APIData apiobj;
  
  int subCanvasOffset = 0;

public:

  Canvas() {}

  // refresh elements generated by API data
  void update();

  void draw(LEDController * controller);

  void incrementSubCanvasOffset();

  void resetSubCanvasOffset();

  void addElement(Elements::Text * e);

  void resetElements();

  std::vector<Elements::Text *> getElements();

  String getElementsString();


  void setElements(char * content);

  void setAPI(String name, String url, long refresh, bool active, std::map<String, APIParseRule> parseRules);

  void resetAPI();

  void toggleAPI();

  APIData getAPIData();

  void updateAPI(unsigned long curtime);
};

#endif
